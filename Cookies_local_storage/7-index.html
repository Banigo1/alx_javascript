<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web Storage Shopping Cart</title>
</head>
<body>
  <h1>Web Storage Shopping Cart</h1>

  <div id="create-store"></div>
  <div id="cart"></div>

  <script>
// Check if session storage is available
if (!sessionStorage) {
  alert("Sorry, your browser does not support Web storage. Try again with a better one.");
  return;
}

// Global variables
const availableItems = ["Shampoo", "Soap", "Sponge", "Water"];
let cart = {};

// Get the cart from session storage
function getCartFromStorage() {
  const cartString = sessionStorage.getItem("cart");
  if (cartString) {
    cart = JSON.parse(cartString);
  } else {
    cart = {};
  }
  return cart;
}

// Add an item to the cart
function addItemToCart(item) {
  if (cart[item]) {
    cart[item]++;
  } else {
    cart[item] = 1;
  }

  // Store the cart in session storage
  sessionStorage.setItem("cart", JSON.stringify(cart));

  // Update the cart display
  displayCart();
}

// Remove an item from the cart
function removeItemFromCart(item) {
  delete cart[item];

  // Store the cart in session storage
  sessionStorage.setItem("cart", JSON.stringify(cart));

  // Update the cart display
  displayCart();
}

// Clear the cart
function clearCart() {
  sessionStorage.clear();

  // Update the cart display
  displayCart();
}

// Create the store
function createStore() {
  const createStoreDiv = document.getElementById("create-store");

  // Create a heading
  const heading = document.createElement("h2");
  heading.textContent = "Available products:";
  createStoreDiv.appendChild(heading);

  // Create a list of items
  const list = document.createElement("ul");
  for (const item of availableItems) {
    const listItem = document.createElement("li");
    listItem.textContent = item;
    listItem.addEventListener("click", () => addItemToCart(item));
    list.appendChild(listItem);
  }
  createStoreDiv.appendChild(list);
}

// Display the cart
function displayCart() {
  const cartDiv = document.getElementById("cart");

  // Clear the cart div
  cartDiv.innerHTML = "";

  // Create a heading
  const heading = document.createElement("h2");
  heading.textContent = "Your cart:";
  cartDiv.appendChild(heading);

  // Create a list of items
  const list = document.createElement("ul");
  for (const item in cart) {
    const listItem = document.createElement("li");
    listItem.textContent = `${item} x ${cart[item]} (remove)`;
    listItem.addEventListener("click", () => removeItemFromCart(item));
    list.appendChild(listItem);
  }

  // Add a clear cart button
  const clearCartButton = document.createElement("button");
  clearCartButton.textContent = "Clear my cart";
  clearCartButton.addEventListener("click", clearCart);
  cartDiv.appendChild(clearCartButton);

  // Append the list to the cart div
  cartDiv.appendChild(list);

  // If the cart is empty, display a message
  if (Object.keys(cart).length === 0) {
    const emptyCartMessage = document.createElement("li");
    emptyCartMessage.textContent = "Your cart is empty";
    list.appendChild(emptyCartMessage);
  }
}

// Initialize the application
createStore();
displayCart();
</script>
</body>
</html>
